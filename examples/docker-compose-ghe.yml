version: "3.6"
services:
  renovate:
    image: ghcr.io/justo-mend/renovate-ce:6.0.0-RC1
    restart: on-failure
    environment:
      # Optional: Define log level. Set to Debug for more verbose output
      # - LOG_LEVEL=DEBUG
      # Provide Mend License and accept Terms of Service
      - MEND_ACCEPT_TOS # Set to 'y' to accept the Mend Renovate Terms of Service
      - MEND_LICENSE_KEY # Set this to the key you received by email
      # Provide connection details to the GitHub Enterprise Server
      - MEND_RNV_PLATFORM=github
      - MEND_RNV_GITHUB_ENDPOINT # GitHub Enterprise API endpoint, include the trailing slash
      - MEND_RNV_GITHUB_APP_ID # GitHub App ID
      - MEND_RNV_GITHUB_APP_KEY # GitHub App Key (PEM file). Alternatively mount as a volume below
      - MEND_RNV_GITHUB_WEBHOOK_SECRET=renovate # Optional: defaults to 'renovate'
      - GITHUB_COM_TOKEN # Personal Access Token for github.com (used for retrieving changelogs)
      # Optional: Database and Cron settings
      # - MEND_RNV_SQLITE_FILE_PATH=/db/renovate-ce.sqlite # Optional: Provide a path to persist the database
      # - MEND_RNV_CRON_JOB_SCHEDULER # Optional: defaults to '0 * * * *' (hourly)
      # - MEND_RNV_CRON_APP_SYNC # Optional: defaults to '0 * * * *' (hourly)
    ports:
      - "80:8080" # Receive webhooks on port 80
    volumes:
      # You can optionally mount the GitHub private key instead of exposing it in env
      - "./renovate.private-key.pem:/usr/src/app/renovate.private-key.pem"
      - "/tmp/renovate/:/tmp/" # Use a volume for this as the disk cache churns frequently
      # Optional: You can use a file mount to persist the database between sessions
      # - "/tmp/db/:/db/" # Unix-style file mounting for the db
      # - "C:\\tmp/db/:/db/" # Windows-style file mounting for the db
